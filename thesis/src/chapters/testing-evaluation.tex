\chapter{Testing and Evaluation}
\label{chapter:testing-evaluation}

\begin{center}
\begin{table}[htb]
  \caption{Unikraft ported libraries metrics}
  \begin{tabular}{l*{6}{c}r}
    Library & Number of sources & Lines of code & Lines of patched code \\
    \hline
    \textit{lib-qemu} & 1091 & 584091 & 236  \\
    \textit{lib-glib} & 90 & 131176 & 0  \\
    \textit{lib-pcre2} & 31 & 59933 & 0 \\
    \textit{lib-xentools} & 59 & 46414 & 20 \\
    \textit{lib-gcc} & 18 & 15200 & 336 \\
  \end{tabular}
  \label{table:reports}
\end{table}
\end{center}

\fig[scale=0.7]{src/img/lib-metrics.pdf}{img:lib-metrics}{Number of sources for popular Unikraft libraries vs \textit{lib-qemu}}

\section{Unikraft Instance Setup}
\label{sec:unikraft-instance-setup}

\lstset{language=make,caption=Running Unikraft command,label=lst:running-unikraft}
\begin{lstlisting}
maria@frodo:~/catalog-core/qemu-hello$ cat xen.x86_64.cfg 
name          = "qemu-hello"
vcpus         = "1"
kernel        = "./workdir/build/qemu-hello_xen-x86_64"
memory        = "1000"
type          = "pv"
maria@frodo:~/catalog-core/qemu-hello$ xl create -c xen.x86_64.cfg
Parsing config from xen.x86_64.cfg
Powered by
o.   .o
Oo   Oo  ___ (_) | __ __  __ _ ' _) :_
oO   oO ' _ `| | |/ /  _)' _` | |_|  _)
oOo oOO| | | | |   (| | | (_) |  _) :_
 OoOoO ._, ._:_:_,\_._,  .__,_:_, \___)
             Pan 0.19.0~be9fc04a-custom
\end{lstlisting}

\section{Testing Environment Setup}
\label{sec:testing-environment-setup}

\subsection{The Unikraft Instance}
\label{subsec:testing-environment-setup}

\subsection{The QEMU Instance}
\label{subsec:qemu-instance}

\fig[scale=0.30]{src/img/menuconfig.png}{img:menuconfig}{Configuring \textit{lib-qemu}}

\section{Functionality Testing}
\label{sec:functionality-testing}

\fig[scale=0.30]{src/img/debugging-qemu.png}{img:debugging-qemu}{Debugging Unikraft image built with \textit{lib-qemu}}

\section{Performance Testing}
\label{sec:performance-testing}

\subsection{Memory Footprint Evaluation}
\label{subsec:memory-footprint-evaluation}

\subsection{Image Size Evaluation}
\label{subsec:image-size-evaluation}

